{UTF-8}
Allocated=
	SUM(Allocated Orders[DDD!])
	~	
	~		|

Transport Time=
	0.5
	~	
	~		|

Availability=
	Trucks/Total Trucks
	~	
	~		|

Return=
	Intransporting/Transport Time
	~	
	~		|

Shortage Rate[DDD]=
	MAX(0, Backlog[DDD]-Allocated Orders[DDD])
	~	
	~		|

Fulfillment Ratio[DDD]=
	XIDZ(Allocated Orders[DDD], Backlog[DDD], 1)*Period Condition*Period
	~	
	~		|

Delay Cost[DDD]=
	Shortage Rate[DDD]*Order Priority[DDD]
	~	
	~		|

Allocated Orders[DDD]=
	ALLOCATE BY PRIORITY(Backlog Allowed[DDD], Order Priority[DDD], 3, 10, Trucks)
	~	
	~		|

Backlog[DDD]= INTEG (
	BLin[DDD]-BLout[DDD],
		20)
	~	
	~		|

Backlog Allowed[DDD]=
	Backlog[DDD]*Period Condition
	~	
	~		|

BLin[DDD]=
	Orders[DDD]
	~	
	~		|

BLout[DDD]=
	Allocated Orders[DDD]
	~	
	~		|

DDD:
	A, B, C
	~	
	~		|

Intransporting= INTEG (
	Allocated-Return,
		0)
	~	
	~		|

Order Priority[DDD]=
	15,10,5
	~	
	~		|

Orders[A]=
	IF THEN ELSE(MODULO(Time, 1)=0, RANDOM NORMAL( 0, 40, 20, 10, 1234), 0) ~~|
Orders[B]=
	IF THEN ELSE( MODULO( Time, 1)=0, RANDOM NORMAL( 0, 60, 30, 15, 3456), 0) ~~|
Orders[C]=
	IF THEN ELSE(MODULO(Time, 1)=0, RANDOM NORMAL( 0, 100, 50, 25, 5678), 0)
	~	
	~		|

Period=
	1
	~	
	~		|

Period Condition=
	IF THEN ELSE(MODULO( Time, Period)=0, 1, 0)
	~	
	~		|

Total Trucks=
	100
	~	
	~		|

Trucks= INTEG (
	Return-Allocated,
		Total Trucks)
	~	
	~		|

********************************************************
	.Control
********************************************************~
		Simulation Control Parameters
	|

FINAL TIME  = 100
	~	Day
	~	The final time for the simulation.
	|

INITIAL TIME  = 0
	~	Day
	~	The initial time for the simulation.
	|

SAVEPER  = 
        TIME STEP
	~	Day [0,?]
	~	The frequency with which output is stored.
	|

TIME STEP  = 0.5
	~	Day [0,?]
	~	The time step for the simulation.
	|

\\\---/// Sketch information - do not modify anything except names
V300  Do not put anything below this section - it will be ignored
*View 1
$192-192-192,0,Times New Roman|12||0-0-0|0-0-0|0-0-255|-1--1--1|-1--1--1|96,96,5,0
10,1,Trucks,952,269,54,132,3,131,0,0,0,0,0,0
10,2,Intransporting,1172,265,53,132,3,131,0,0,0,0,0,0
1,3,5,2,4,0,0,22,0,0,0,-1--1--1,,1|(1089,371)|
1,4,5,1,100,0,0,22,0,0,0,-1--1--1,,1|(1026,371)|
11,5,332,1053,371,6,8,34,3,0,0,1,0,0,0
10,6,Allocated,1053,390,31,11,40,3,0,0,-1,0,0,0
1,7,9,1,4,0,0,22,0,0,0,-1--1--1,,1|(1029,168)|
1,8,9,2,100,0,0,22,0,0,0,-1--1--1,,1|(1091,168)|
11,9,204,1058,168,6,8,34,3,0,0,1,0,0,0
10,10,Return,1058,187,22,11,40,3,0,0,-1,0,0,0
10,11,Backlog,1149,581,40,20,3,3,0,0,0,0,0,0
12,12,48,985,583,10,8,0,3,0,0,-1,0,0,0
1,13,15,11,4,0,0,22,0,0,0,-1--1--1,,1|(1083,583)|
1,14,15,12,100,0,0,22,0,0,0,-1--1--1,,1|(1020,583)|
11,15,48,1052,583,6,8,34,3,0,0,1,0,0,0
10,16,BLin,1052,602,17,11,40,3,0,0,-1,0,0,0
12,17,48,1292,582,10,8,0,3,0,0,-1,0,0,0
1,18,20,17,4,0,0,22,0,0,0,-1--1--1,,1|(1261,582)|
1,19,20,11,100,0,0,22,0,0,0,-1--1--1,,1|(1209,582)|
11,20,48,1235,582,6,8,34,3,0,0,1,0,0,0
10,21,BLout,1235,601,21,11,40,3,0,0,-1,0,0,0
10,22,Allocated Orders,1112,452,55,11,8,3,0,0,0,0,0,0
10,23,Orders,956,611,24,11,8,3,0,0,0,0,0,0
1,24,23,16,0,0,0,0,0,64,0,-1--1--1,,1|(1000,606)|
1,25,22,21,1,0,0,0,0,64,0,-1--1--1,,1|(1213,487)|
1,26,22,6,1,0,0,0,0,64,0,-1--1--1,,1|(1117,443)|
10,27,Order Priority,1285,442,45,11,8,3,0,0,0,0,0,0
10,28,Total Trucks,1298,205,41,11,8,3,0,0,0,0,0,0
1,29,27,22,0,0,0,0,0,64,0,-1--1--1,,1|(1210,445)|
1,30,1,22,1,0,0,0,0,64,0,-1--1--1,,1|(1044,443)|
1,31,28,1,0,0,0,0,0,64,1,-1--1--1,,1|(1138,234)|
1,32,2,10,0,0,0,0,0,64,0,-1--1--1,,1|(1102,217)|
10,33,Time,1135,384,26,11,8,2,1,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
10,34,Time,1155,398,26,11,8,2,1,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
10,35,Backlog Allowed,1107,503,55,11,8,3,0,0,0,0,0,0
1,36,11,35,0,0,0,0,0,64,0,-1--1--1,,1|(1128,543)|
1,37,35,22,0,0,0,0,0,64,0,-1--1--1,,1|(1108,484)|
10,38,Period Condition,980,526,54,11,8,3,0,0,0,0,0,0
10,39,Period,971,451,22,11,8,3,0,0,0,0,0,0
1,40,39,38,0,0,0,0,0,64,0,-1--1--1,,1|(974,481)|
1,41,38,35,0,0,0,0,0,64,0,-1--1--1,,1|(1036,516)|
10,42,Time,921,476,26,11,8,2,0,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
1,43,42,38,0,0,0,0,0,64,0,-1--1--1,,1|(944,496)|
10,44,Fulfillment Ratio,1301,275,51,11,8,3,0,0,0,0,0,0
10,45,Delay Cost,1303,309,36,11,8,3,0,0,0,0,0,0
1,46,22,44,0,1,0,0,0,64,0,-1--1--1,,1|(1200,368)|
10,47,Shortage Rate,1306,348,45,11,8,3,0,0,0,0,0,0
1,48,22,47,0,1,0,0,0,64,0,-1--1--1,,1|(1202,403)|
1,49,11,47,0,1,0,0,0,64,0,-1--1--1,,1|(1226,465)|
1,50,11,44,0,1,0,0,0,64,0,-1--1--1,,1|(1223,429)|
1,51,27,45,0,1,0,0,0,64,0,-1--1--1,,1|(1292,382)|
1,52,47,45,0,1,0,0,0,64,0,-1--1--1,,1|(1305,335)|
10,53,Availability,1301,238,39,11,8,3,0,0,0,0,0,0
1,54,1,53,0,1,0,0,0,64,0,-1--1--1,,1|(1127,253)|
1,55,28,53,0,1,0,0,0,64,0,-1--1--1,,1|(1298,214)|
1,56,38,44,0,1,0,0,0,64,0,-1--1--1,,1|(1134,404)|
1,57,39,44,0,1,0,0,0,64,0,-1--1--1,,1|(1129,366)|
10,58,Time,956,641,26,11,8,2,0,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
1,59,58,23,0,0,0,0,0,64,0,-1--1--1,,1|(956,633)|
10,60,Transport Time,1062,248,49,11,8,3,0,0,0,0,0,0
1,61,60,10,0,0,0,0,0,64,0,-1--1--1,,1|(1060,224)|
///---\\\
:L<%^E!@
1:D1.vdf
1:D2.vdf
9:D1
15:0,0,0,0,0,0
19:5,0
27:2,
34:0,
4:Time
5:Fulfillment Ratio[DDD]
24:0
25:100
26:100
6:A
6:B
6:C
