{UTF-8}
Availability=
	Trucks/Total Trucks
	~	
	~		|

Shortage Rate[DDD]=
	MAX(0, Backlog[DDD]-Allocated Orders[DDD])
	~	
	~		|

Fulfillment Ratio[DDD]=
	XIDZ(Allocated Orders[DDD], Backlog[DDD], 1)*Period Condition*Period
	~	
	~		|

Delay Cost[DDD]=
	Shortage Rate[DDD]*Order Priority[DDD]
	~	
	~		|

Allocated=
	SUM(Allocated Orders[DDD!])
	~	
	~		|

Allocated Orders[DDD]=
	ALLOCATE BY PRIORITY(Backlog Allowed[DDD], Order Priority[DDD], 3, 10, Trucks)
	~	
	~		|

Backlog[DDD]= INTEG (
	BLin[DDD]-BLout[DDD],
		20)
	~	
	~		|

Backlog Allowed[DDD]=
	Backlog[DDD]*Period Condition
	~	
	~		|

BLin[DDD]=
	Orders[DDD]
	~	
	~		|

BLout[DDD]=
	Allocated Orders[DDD]
	~	
	~		|

DDD:
	A, B, C
	~	
	~		|

Intransporting= INTEG (
	Allocated-Return,
		0)
	~	
	~		|

Order Priority[DDD]=
	15,10,5
	~	
	~		|

Orders[A]=
	RANDOM NORMAL( 0, 40, 20, 10, 1234) ~~|
Orders[B]=
	RANDOM NORMAL( 0, 60, 30, 15, 3456) ~~|
Orders[C]=
	RANDOM NORMAL( 0, 100, 50, 25, 5678)
	~	
	~		|

Period=
	1
	~	
	~		|

Period Condition=
	IF THEN ELSE(MODULO( Time, Period)=0, 1, 0)
	~	
	~		|

Return=
	Intransporting/Transport Time
	~	
	~		|

Total Trucks=
	400
	~	
	~		|

Transport Time=
	RANDOM UNIFORM( 2, 6, 4567)
	~	
	~		|

Trucks= INTEG (
	Return-Allocated,
		Total Trucks)
	~	
	~		|

********************************************************
	.Control
********************************************************~
		Simulation Control Parameters
	|

FINAL TIME  = 100
	~	Hour
	~	The final time for the simulation.
	|

INITIAL TIME  = 0
	~	Hour
	~	The initial time for the simulation.
	|

SAVEPER  = 
        TIME STEP
	~	Hour [0,?]
	~	The frequency with which output is stored.
	|

TIME STEP  = 1
	~	Hour [0,?]
	~	The time step for the simulation.
	|

\\\---/// Sketch information - do not modify anything except names
V300  Do not put anything below this section - it will be ignored
*View 1
$192-192-192,0,Times New Roman|12||0-0-0|0-0-0|0-0-255|-1--1--1|-1--1--1|96,96,5,0
10,1,Trucks,379,284,54,132,3,131,0,0,0,0,0,0
10,2,Intransporting,599,280,53,132,3,131,0,0,0,0,0,0
1,3,5,2,4,0,0,22,0,0,0,-1--1--1,,1|(516,386)|
1,4,5,1,100,0,0,22,0,0,0,-1--1--1,,1|(453,386)|
11,5,444,480,386,6,8,34,3,0,0,1,0,0,0
10,6,Allocated,480,405,31,11,40,3,0,0,-1,0,0,0
1,7,9,1,4,0,0,22,0,0,0,-1--1--1,,1|(456,183)|
1,8,9,2,100,0,0,22,0,0,0,-1--1--1,,1|(518,183)|
11,9,204,485,183,6,8,34,3,0,0,1,0,0,0
10,10,Return,485,202,22,11,40,3,0,0,-1,0,0,0
10,11,Backlog,576,596,40,20,3,3,0,0,0,0,0,0
12,12,48,412,598,10,8,0,3,0,0,-1,0,0,0
1,13,15,11,4,0,0,22,0,0,0,-1--1--1,,1|(510,598)|
1,14,15,12,100,0,0,22,0,0,0,-1--1--1,,1|(447,598)|
11,15,48,479,598,6,8,34,3,0,0,1,0,0,0
10,16,BLin,479,617,17,11,40,3,0,0,-1,0,0,0
12,17,48,719,597,10,8,0,3,0,0,-1,0,0,0
1,18,20,17,4,0,0,22,0,0,0,-1--1--1,,1|(688,597)|
1,19,20,11,100,0,0,22,0,0,0,-1--1--1,,1|(636,597)|
11,20,48,662,597,6,8,34,3,0,0,1,0,0,0
10,21,BLout,662,616,21,11,40,3,0,0,-1,0,0,0
10,22,Allocated Orders,539,467,55,11,8,3,0,0,0,0,0,0
10,23,Orders,383,626,24,11,8,3,0,0,0,0,0,0
1,24,23,16,0,0,0,0,0,64,0,-1--1--1,,1|(427,621)|
1,25,22,21,1,0,0,0,0,64,0,-1--1--1,,1|(640,502)|
1,26,22,6,1,0,0,0,0,64,0,-1--1--1,,1|(544,458)|
10,27,Order Priority,712,457,45,11,8,3,0,0,0,0,0,0
10,28,Total Trucks,725,220,41,11,8,3,0,0,0,0,0,0
1,29,27,22,0,0,0,0,0,64,0,-1--1--1,,1|(637,460)|
1,30,1,22,1,0,0,0,0,64,0,-1--1--1,,1|(471,458)|
1,31,28,1,0,0,0,0,0,64,1,-1--1--1,,1|(565,249)|
1,32,2,10,0,0,0,0,0,64,0,-1--1--1,,1|(529,232)|
10,33,Transport Time,484,260,49,11,8,3,0,0,-1,0,0,0
1,34,33,10,0,0,0,0,0,64,0,-1--1--1,,1|(484,238)|
10,35,Time,562,399,26,11,8,2,1,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
10,36,Time,582,413,26,11,8,2,1,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
10,37,Backlog Allowed,534,518,55,11,8,3,0,0,0,0,0,0
1,38,11,37,0,0,0,0,0,64,0,-1--1--1,,1|(555,558)|
1,39,37,22,0,0,0,0,0,64,0,-1--1--1,,1|(535,499)|
10,40,Period Condition,407,541,54,11,8,3,0,0,0,0,0,0
10,41,Period,398,466,22,11,8,3,0,0,0,0,0,0
1,42,41,40,0,0,0,0,0,64,0,-1--1--1,,1|(401,496)|
1,43,40,37,0,0,0,0,0,64,0,-1--1--1,,1|(463,531)|
10,44,Time,348,491,26,11,8,2,0,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
1,45,44,40,0,0,0,0,0,64,0,-1--1--1,,1|(371,511)|
10,46,Fulfillment Ratio,728,290,51,11,8,3,0,0,0,0,0,0
10,47,Delay Cost,730,324,36,11,8,3,0,0,0,0,0,0
1,48,22,46,0,1,0,0,0,64,0,-1--1--1,,1|(627,383)|
10,49,Shortage Rate,733,363,45,11,8,3,0,0,0,0,0,0
1,50,22,49,0,1,0,0,0,64,0,-1--1--1,,1|(629,418)|
1,51,11,49,0,1,0,0,0,64,0,-1--1--1,,1|(653,480)|
1,52,11,46,0,1,0,0,0,64,0,-1--1--1,,1|(650,444)|
1,53,27,47,0,1,0,0,0,64,0,-1--1--1,,1|(719,397)|
1,54,49,47,0,1,0,0,0,64,0,-1--1--1,,1|(732,350)|
10,55,Availability,728,253,39,11,8,3,0,0,0,0,0,0
1,56,1,55,0,1,0,0,0,64,0,-1--1--1,,1|(554,268)|
1,57,28,55,0,1,0,0,0,64,0,-1--1--1,,1|(725,229)|
1,58,40,46,0,1,0,0,0,64,0,-1--1--1,,1|(561,419)|
1,59,41,46,0,1,0,0,0,64,0,-1--1--1,,1|(556,381)|
///---\\\
:L<%^E!@
1:P1h.vdf
1:P4h.vdf
9:P1h
15:0,0,0,0,0,0
19:5,0
27:2,
34:0,
4:Time
5:Shortage Rate[DDD]
24:21
25:100
26:100
6:A
6:B
6:C
