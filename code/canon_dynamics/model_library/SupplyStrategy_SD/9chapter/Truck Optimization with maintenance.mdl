{UTF-8}
NMMout=
	Failure
	~	
	~		|

Failure=
	MIN(Trucks-Allocated, Need for Maintenance)
	~	
	~		|

Preventive Maintenance=
	Total Trucks/Prevenitive Maintenance Period
	~	
	~	6개월에 한 번 정비를 받는 것으로 가정
	|

Fulfillment Ratio[DDD]=
	Allocated Orders[DDD]/Backlog[DDD]
	~	
	~		|

NMMin=
	Corrective Maintenance+Preventive Maintenance
	~	
	~		|

Corrective Maintenance=
	Intransporting*Failure Ratio
	~	
	~	6개월에 한 번 정도 사고가 발생하는 것으로 가정
	|

Need for Maintenance= INTEG (
	NMMin-NMMout,
		0)
	~	
	~		|

Fulfillment Ratio Difference=
	Target Fulfillment Ratio-SUM(Fulfillment Ratio[DDD!])/3
	~	
	~		|

Target Fulfillment Ratio=
	0.9
	~	
	~		|

Trucks Cost=
	Total Trucks*1
	~	
	~		|

Allocated=
	SUM(Allocated Orders[DDD!])
	~	
	~		|

Allocated Orders[DDD]=
	ALLOCATE BY PRIORITY(Backlog Allowed[DDD], Order Priority[DDD], 3, 10, Trucks)
	~	
	~		|

Backlog[DDD]= INTEG (
	BLin[DDD]-BLout[DDD],
		20)
	~	
	~		|

Backlog Allowed[DDD]=
	Backlog[DDD]*Period Condition
	~	
	~		|

BLin[DDD]=
	Orders[DDD]
	~	
	~		|

BLout[DDD]=
	Allocated Orders[DDD]
	~	
	~		|

DDD:
	A, B, C
	~	
	~		|

Failure Ratio=
	0.01
	~	
	~		|

Intransporting= INTEG (
	Allocated-Return,
		0)
	~	
	~		|

Order Priority[DDD]=
	15,10,5
	~	
	~		|

Orders[A]=
	RANDOM NORMAL( 0, 40, 20, 10, 1234) ~~|
Orders[B]=
	RANDOM NORMAL( 0, 60, 30, 15, 3456) ~~|
Orders[C]=
	RANDOM NORMAL( 0, 100, 50, 25, 5678)
	~	
	~		|

Period=
	1
	~	
	~		|

Period Condition=
	IF THEN ELSE(MODULO( Time, Period)=0, 1, 0)
	~	
	~		|

Prevenitive Maintenance Period=
	1440
	~	
	~		|

Repair Shop= INTEG (
	Failure-Return to Field,
		0)
	~	
	~		|

Repair Time=
	40
	~	
	~	7*24
	|

Return=
	Intransporting/Transport Time
	~	
	~		|

Return to Field=
	Repair Shop/Repair Time
	~	
	~		|

Total Trucks=
	400
	~	
	~		|

Transport Time=
	RANDOM UNIFORM( 2, 6, 4567)
	~	
	~		|

Trucks= INTEG (
	Return+Return to Field-Failure-Allocated,
		Total Trucks)
	~	
	~		|

********************************************************
	.Control
********************************************************~
		Simulation Control Parameters
	|

FINAL TIME  = 10000
	~	Hour
	~	The final time for the simulation.
	|

INITIAL TIME  = 0
	~	Hour
	~	The initial time for the simulation.
	|

SAVEPER  = 
        TIME STEP 
	~	Hour [0,?]
	~	The frequency with which output is stored.
	|

TIME STEP  = 1
	~	Hour [0,?]
	~	The time step for the simulation.
	|

\\\---/// Sketch information - do not modify anything except names
V300  Do not put anything below this section - it will be ignored
*View 1
$192-192-192,0,Times New Roman|12||0-0-0|0-0-0|0-0-255|-1--1--1|-1--1--1|96,96,100,0
10,1,Trucks,499,282,59,133,3,131,0,0,0,0,0,0
10,2,Intransporting,737,280,58,132,3,131,0,0,0,0,0,0
1,3,5,2,4,0,0,22,0,0,0,-1--1--1,,1|(649,386)|
1,4,5,1,100,0,0,22,0,0,0,-1--1--1,,1|(582,386)|
11,5,508,613,386,6,8,34,3,0,0,1,0,0,0
10,6,Allocated,613,405,31,11,40,3,0,0,-1,0,0,0
1,7,9,1,4,0,0,22,0,0,0,-1--1--1,,1|(584,211)|
1,8,9,2,100,0,0,22,0,0,0,-1--1--1,,1|(651,211)|
11,9,204,617,211,6,8,34,3,0,0,1,0,0,0
10,10,Return,617,230,22,11,40,3,0,0,-1,0,0,0
10,11,Backlog,766,595,40,20,3,3,0,0,0,0,0,0
12,12,48,602,597,10,8,0,3,0,0,-1,0,0,0
1,13,15,11,4,0,0,22,0,0,0,-1--1--1,,1|(700,597)|
1,14,15,12,100,0,0,22,0,0,0,-1--1--1,,1|(637,597)|
11,15,48,669,597,6,8,34,3,0,0,1,0,0,0
10,16,BLin,669,616,17,11,40,3,0,0,-1,0,0,0
12,17,48,909,596,10,8,0,3,0,0,-1,0,0,0
1,18,20,17,4,0,0,22,0,0,0,-1--1--1,,1|(878,596)|
1,19,20,11,100,0,0,22,0,0,0,-1--1--1,,1|(826,596)|
11,20,48,852,596,6,8,34,3,0,0,1,0,0,0
10,21,BLout,852,615,21,11,40,3,0,0,-1,0,0,0
10,22,Allocated Orders,649,463,55,11,8,3,0,0,0,0,0,0
10,23,Orders,557,617,24,11,8,3,0,0,0,0,0,0
1,24,23,16,0,0,0,0,0,64,0,-1--1--1,,1|(609,616)|
1,25,22,21,1,0,0,0,0,64,0,-1--1--1,,1|(761,489)|
1,26,22,6,1,0,0,0,0,64,0,-1--1--1,,1|(650,437)|
10,27,Order Priority,831,468,45,11,8,3,0,0,0,0,0,0
10,28,Total Trucks,128,602,41,11,8,3,0,0,0,0,0,0
1,29,27,22,0,0,0,0,0,64,0,-1--1--1,,1|(751,465)|
1,30,1,22,1,0,0,0,0,64,0,-1--1--1,,1|(562,487)|
1,31,2,10,0,0,0,0,0,64,0,-1--1--1,,1|(665,250)|
10,32,Transport Time,617,260,49,11,8,3,0,0,-1,0,0,0
1,33,32,10,0,0,0,0,0,64,0,-1--1--1,,1|(617,252)|
10,34,Time,990,356,26,11,8,2,1,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
10,35,Time,1010,370,26,11,8,2,1,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
10,36,Backlog Allowed,672,531,55,11,8,3,0,0,0,0,0,0
1,37,11,36,0,0,0,0,0,64,0,-1--1--1,,1|(718,562)|
1,38,36,22,0,0,0,0,0,64,0,-1--1--1,,1|(662,503)|
10,39,Period Condition,544,539,54,11,8,3,0,0,0,0,0,0
10,40,Period,551,502,22,11,8,3,0,0,0,0,0,0
1,41,40,39,0,0,0,0,0,64,0,-1--1--1,,1|(548,513)|
1,42,39,36,0,0,0,0,0,64,0,-1--1--1,,1|(600,535)|
10,43,Time,593,593,26,11,8,2,0,3,-1,0,0,0,128-128-128,0-0-0,|12||128-128-128
1,44,43,39,0,0,0,0,0,64,0,-1--1--1,,1|(573,571)|
10,45,Repair Shop,227,281,55,133,3,131,0,0,0,0,0,0
1,46,48,45,4,0,0,22,0,0,0,-1--1--1,,1|(322,374)|
1,47,48,1,100,0,0,22,0,0,0,-1--1--1,,1|(407,374)|
11,48,620,368,374,6,8,34,3,0,0,1,0,0,0
10,49,Failure,368,393,23,11,40,3,0,0,-1,0,0,0
1,50,52,1,4,0,0,22,0,0,0,-1--1--1,,1|(405,213)|
1,51,52,45,100,0,0,22,0,0,0,-1--1--1,,1|(320,213)|
11,52,476,365,213,6,8,34,3,0,0,1,0,0,0
10,53,Return to Field,365,232,47,11,40,3,0,0,-1,0,0,0
10,54,Preventive Maintenance,189,535,41,19,8,3,0,0,0,0,0,0
10,55,Corrective Maintenance,356,536,41,19,8,3,0,0,0,0,0,0
10,56,Prevenitive Maintenance Period,255,608,64,19,8,3,0,0,-1,0,0,0
1,57,56,54,0,0,0,0,0,64,0,-1--1--1,,1|(226,576)|
10,58,Failure Ratio,406,620,41,11,8,3,0,0,-1,0,0,0
1,59,58,55,0,0,0,0,0,64,0,-1--1--1,,1|(387,587)|
1,60,45,53,0,0,0,0,0,64,0,-1--1--1,,1|(301,254)|
10,61,Repair Time,372,289,39,11,8,3,0,0,-1,0,0,0
1,62,61,53,0,0,0,0,0,64,0,-1--1--1,,1|(369,267)|
1,63,28,1,0,0,0,0,0,64,1,-1--1--1,,1|(284,466)|
10,64,Fulfillment Ratio,898,390,51,11,8,3,0,0,0,0,0,0
1,65,11,64,0,1,0,0,0,64,0,-1--1--1,,1|(830,493)|
1,66,22,64,0,1,0,0,0,64,0,-1--1--1,,1|(766,428)|
10,67,Target Fulfillment Ratio,884,274,55,19,8,3,0,0,0,0,0,0
10,68,Fulfillment Ratio Difference,885,328,52,19,8,3,0,0,0,0,0,0
1,69,67,68,0,1,0,0,0,64,0,-1--1--1,,1|(884,294)|
1,70,64,68,0,1,0,0,0,64,0,-1--1--1,,1|(893,369)|
10,71,Trucks Cost,883,210,40,11,8,3,0,0,0,0,0,0
1,72,28,71,0,1,0,0,0,64,0,-1--1--1,,1|(498,409)|
1,73,28,54,0,0,0,0,0,64,0,-1--1--1,,1|(149,577)|
10,74,Need for Maintenance,238,467,40,20,3,3,0,0,0,0,0,0
12,75,48,138,462,10,8,0,3,0,0,-1,0,0,0
1,76,78,74,4,0,0,22,0,0,0,-1--1--1,,1|(188,462)|
1,77,78,75,100,0,0,22,0,0,0,-1--1--1,,1|(157,462)|
11,78,48,173,462,6,8,34,3,0,0,1,0,0,0
10,79,NMMin,173,481,27,11,40,3,0,0,-1,0,0,0
12,80,48,345,464,10,8,0,3,0,0,-1,0,0,0
1,81,83,80,4,0,0,22,0,0,0,-1--1--1,,1|(323,464)|
1,82,83,74,100,0,0,22,0,0,0,-1--1--1,,1|(289,464)|
11,83,48,306,464,6,8,34,3,0,0,1,0,0,0
10,84,NMMout,306,483,32,11,40,3,0,0,-1,0,0,0
1,85,54,79,0,0,0,0,0,64,0,-1--1--1,,1|(182,510)|
1,86,55,79,0,0,0,0,0,64,0,-1--1--1,,1|(264,508)|
1,87,74,49,0,0,0,0,0,64,0,-1--1--1,,1|(304,428)|
1,88,49,84,0,0,0,0,0,64,0,-1--1--1,,1|(341,432)|
1,89,2,55,0,0,0,0,0,64,0,-1--1--1,,1|(537,413)|
1,90,6,49,1,0,0,0,0,64,0,-1--1--1,,1|(467,481)|
1,91,1,49,0,0,0,0,0,64,0,-1--1--1,,1|(415,351)|
///---\\\
:L<%^E!@
9:TO1h
11:Truck Optimization.voc
12:Truck Optimization.vpd
15:0,0,0,0,0,0
19:100,0
27:2,
34:0,
4:Time
5:Trucks
24:0
25:10000
26:10000
6:A
6:B
6:C
